<!-- Task 4: Post Loader with Delayed Promise-->

<!DOCTYPE html>
<html>
<head>
  <title>Post Loader with Delay</title>
  <style>
    body { font-family: Arial; max-width: 600px; margin: 30px auto; background-color: thistle;}
    #status { font-weight: bold; margin-bottom: 15px; }
    li { margin: 6px 0; }
    button { padding: 8px 12px; }
  </style>
</head>
<body>
  <h2>Post Loader (Delayed Promise)</h2>

  <button onclick="loadPosts()">Load Posts</button>
  <button onclick="loadPosts(true)">Retry</button>

  <div id="status"></div>
  <ul id="postList"></ul>

  <script>
    function getPosts(shouldFail = false) {
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          if (shouldFail) {
            reject("Failed to load posts.");
          } else {
            resolve([
              "How to Learn JavaScript",
              "Understanding Promises",
              "Async & Await Simplified",
              "Frontend Tips for Beginners",
              "Mastering DOM Manipulation"
            ]);
          }
        }, 2000);
      });
    }

    async function loadPosts(retry = false) {
      const status = document.getElementById('status');
      const list = document.getElementById('postList');

      status.textContent = "Loading posts...";
      list.innerHTML = "";

      try {
        const posts = await getPosts(retry);
        status.textContent = "Posts Loaded:";
        posts.forEach(title => {
          list.innerHTML += <li>${title}</li>;
        });

      } catch (err) {
        status.textContent = err + " Click Retry.";
      }
    }
  </script>
</body>
</html>